(window["RCDLjsonFunction"]=window["RCDLjsonFunction"]||[]).push([[9],{170:function(t,e,a){"use strict";a.r(e);var o=a(416);var r=a.n(o);var i=a(417);var n=a(27);var l=a.n(n);var s=a(104);var c=a(31);var u=a(8);var d=a.n(u);var f=a(32);var p=a.n(f);var v=a(36);var b=a.n(v);var C=a(1);var h=a.n(C);var g=a(28);var R=a.n(g);var y=a(517);var L=a.n(y);var D=a(0);var m=a.n(D);RCDL.features.dataVisualisation={init:function init(t,e,o){var r=typeof o==="undefined"?window.document:o.parentNode;var i=RCDL.utilities.queryDOM(t,r);var n=e||{};var l=false;if(i.length>0){Promise.all([a.e(6),a.e(32),a.e(4),a.e(47),a.e(42)]).then(a.t.bind(null,798,7)).then(function(t){if(typeof RCDL.features.dataVisualisation.Charts==="undefined"){RCDL.features.dataVisualisation.Charts=t.default.Chart}m()(i).call(i,function(e){var a=e;if(a.getAttribute("data-chart-active")!=="true"){a.setAttribute("data-chart-active","true");if(!l){var o=document.getElementById("tooltipHolder");if(o===null){o=RCDL.utilities.createElement({tagName:"div",className:"data-visualisation-tooltip-holder",text:"",attributes:{id:"tooltipHolder"}});RCDL.features.dataVisualisation.tooltipHolder=o;document.getElementsByTagName("body")[0].appendChild(o)}RCDL.features.dataVisualisation.tooltipHolder=o;l=true}var r=a.getElementsByClassName("rc-table")[0];var i=a.getAttribute("data-hide-table");var s=a.getAttribute("data-chart-type")||"bar";var c=["bar","line","doughnut","pie"];var u=L()(RCDL.utilities.breakpoints).width.current;var d=null;var f=null;if(u==="xs"||u==="sm"){d=400;f=600}else{d=400;f=250}var p=RCDL.utilities.createElement({tagName:"canvas",attributes:{width:d,height:f}});a.appendChild(p);if(!R()(c).call(c,s)){var v;throw new Error(h()(v='"'.concat(s,'" is invalid chart type. Use any of these: ')).call(v,c,'. Reset to default "bar" type.'))}if(i||i!==null){r.style.display="none"}RCDL.features.dataVisualisation.convertTable(r).then(function(e){RCDL.features.dataVisualisation.buildChart(t.default.Chart,p,e,s,n)})}})})}},buildChart:function buildChart(t,e,a,o,r){var i,n,l;var u=a.headers,f=a.results;var v=u[0][0];var C=b()(i=f[0]).call(i,function(t){return t[v]});var g=[];var R=RCDL.features.dataVisualisation.instances.length+1;var y=RCDL.config.colours,L=y.primary,D=y.secondary;var T=L[0].hexCode;var w=L[1].hexCode;var V=D[2].hexCode;var k=D[3].hexCode;var x=function hexToRgba(t,e){var a,o,r;t=t.replace("#","");var i=p()(t.substring(0,2),16);var n=p()(t.substring(2,4),16);var l=p()(t.substring(4,6),16);return h()(a=h()(o=h()(r="rgba(".concat(i,",")).call(r,n,",")).call(o,l,",")).call(a,e,")")};var B=[T,V,x(T,.6),w,x(T,.3),k];var E=r.colours||B;e.setAttribute("data-js-chart-id",R);t.defaults.global.defaultFontFamily="RC TYPE";t.defaults.global.elements.rectangle.borderColor="transparent";t.defaults.scale.ticks.beginAtZero=true;m()(n=u[0]).call(n,function(t,e){if(e>0){g[e-1]={label:t,data:[]}}});b()(l=f[0]).call(l,function(t){var e;m()(e=d()(t)).call(e,function(e,a){if(a>0){var r;var i=t[e];var n=g[a-1];n.data=h()(r=[]).call(r,Object(c["a"])(n.data),[i]);switch(o){case"bar":n.backgroundColor=E[a-1];n.borderColor="transparent";break;case"line":n.pointBackgroundColor=E[a-1];n.backgroundColor="transparent";n.borderColor=E[a-1];break;case"doughnut":n.backgroundColor=E;break;case"pie":n.backgroundColor=E;break;default:break}}})});var N={type:o,data:{labels:C,datasets:g},options:{legend:{position:"top",labels:{padding:30}},tooltips:{enabled:false,intersect:false,mode:o==="line"?"index":"point",custom:function custom(t){RCDL.features.dataVisualisation.buildTooltip(t,R)}}}};RCDL.features.dataVisualisation.instances.push({id:R,obj:new t(e,Object(s["a"])({},N))})},convertTable:function convertTable(t){return new l.a(function(e,o){if(t!==null){Promise.all([a.e(3),a.e(6),a.e(4),a.e(34),a.e(35),a.e(61),a.e(69),a.e(45),a.e(55),a.e(57),a.e(49),a.e(54),a.e(53),a.e(64),a.e(51),a.e(79),a.e(43),a.e(44),a.e(48),a.e(50),a.e(52),a.e(56),a.e(58),a.e(60),a.e(68),a.e(71),a.e(73),a.e(74),a.e(80),a.e(81)]).then(a.t.bind(null,841,7)).then(function(a){var o=new a.default(t.outerHTML);var r=o.headers,i=o.results;e({headers:r,results:i})})}else{o("No table supplied in selector")}})},buildTooltip:function buildTooltip(t,e){var a=document.getElementById(RCDL.features.dataVisualisation.chartSelectors.tooltipContent);var o=document.getElementById(RCDL.features.dataVisualisation.chartSelectors.tooltipButton);var r=RCDL.features,i=r.dataVisualisation,n=r.Tooltip;if(o){o.parentNode.removeChild(o)}if(a){a.parentNode.removeChild(a)}if(a){i.cleanUpTooltips()}if(t.body){var l=i.instances[e-1].obj.tooltip;var s=l._chart.canvas.getBoundingClientRect();a=RCDL.utilities.createElement({tagName:"div",className:"rc-tooltip rc-tooltip--chart",attributes:{id:RCDL.features.dataVisualisation.chartSelectors.tooltipContent,"data-tooltip-chart":"true"}});i.tooltipHolder.appendChild(a);o=RCDL.utilities.createElement({tagName:"button",className:"rc-btn rc-btn--two",text:"",attributes:{id:RCDL.features.dataVisualisation.chartSelectors.tooltipButton,"data-tooltip":RCDL.features.dataVisualisation.chartSelectors.tooltipContent,"data-tooltip-placement":"top","data-tooltip-hideOnClick":"false"}});i.tooltipHolder.appendChild(o);a.innerHTML=i.createTooltipBody(t);o.style.position="absolute";o.style.pointerEvents="none";o.style.opacity=0;o.style.width="10px";o.style.height="10px";o.style.padding=0;o.style.left=s.left+window.pageXOffset+t.caretX-5+"px";o.style.top=s.top+window.pageYOffset+t.caretY+"px";a.style.pointerEvents="none";n.init(o).then(function(t){var e;m()(e=d()(RCDL.features.Tooltip.instances)).call(e,function(t){if(typeof RCDL.features.Tooltip.instances[t].reference!=="undefined"&&RCDL.features.Tooltip.instances[t].reference.id===RCDL.features.dataVisualisation.chartSelectors.tooltipButton){RCDL.features.Tooltip.instances[t].show()}})})}},cleanUpTooltips:function cleanUpTooltips(){var t;m()(t=d()(RCDL.features.Tooltip.instances)).call(t,function(t){if(typeof RCDL.features.Tooltip.instances[t].reference!=="undefined"&&RCDL.features.Tooltip.instances[t].reference.id===RCDL.features.dataVisualisation.chartSelectors.tooltipButton){RCDL.features.Tooltip.instances[t].destroy();delete RCDL.features.Tooltip.instances[t]}})},createTooltipBody:function createTooltipBody(t){var e;var a="";var o=t.title||[];var r=b()(e=t.body).call(e,function(t){return t.lines});m()(o).call(o,function(t){a+="<b>".concat(t,"</b> <br />")});m()(r).call(r,function(e,o){var r,i;var n=t.labelColors[o],l=n.backgroundColor,s=n.borderColor;var c=h()(r='<div style="background:'.concat(l,";border-color:")).call(r,s,'" class="rc-tooltip--chart__legend-box"></div>');var u=h()(i="".concat(c,"<div>")).call(i,e,"</div>");a+='<div class="rc-tooltip--chart__legend-row">'.concat(u,"</div>")});return a},instances:[],tooltipHolder:null,chartSelectors:{tooltipButton:"chartjs-tooltip-button",tooltipContent:"chartjs-tooltip"}};e["default"]={fn:function(){var t=Object(i["a"])(r.a.mark(function _callee(t){return r.a.wrap(function _callee$(e){while(1){switch(e.prev=e.next){case 0:return e.abrupt("return",RCDL.features.dataVisualisation.init([".rc-data-visualisation"],null,t));case 1:case"end":return e.stop()}}},_callee)}));function fn(e){return t.apply(this,arguments)}return fn}()}}}]);